# Code Optimization Report - Decision Jar / Date Jar

## Analysis Summary

### Dependencies Review
**Potential Optimizations:**
- ✅ Capacitor packages (~8MB) - Needed for mobile functionality
- ✅ cloudinary, stripe, resend - Required for features
- ⚠️ `dotenv` - Not needed in Next.js (built-in env support)
- ✅ Most dependencies are actively used

### Code Quality Findings
1. **TODO Items**: 1 found in stripe webhook (payment due email)
2. **Console.logs**: ~60+ found (mostly in `/scripts`, acceptable for dev tools)
3. **Large Components**: Several files exceed 500 lines

### Performance Opportunities
1. **Image Optimization**: Jar3D component could use lazy loading
2. **Code Splitting**: Modal components should be dynamically imported
3. **API Routes**: Some could benefit from caching headers
4. **Framer Motion**: Heavy animations could be optimized

### Bundle Size
Current approach uses:
- Framer Motion (heavy animation library)
- Multiple modal components (could be lazy-loaded)
- Lucide icons (tree-shakeable, good choice)

## Optimization Plan

### Phase 1: Quick Wins (Low Effort, High Impact)
- [ ] Remove `dotenv` dependency
- [ ] Add lazy loading for modals
- [ ] Add React.memo to expensive components
- [ ] Optimize image loading

### Phase 2: Performance
- [ ] Add proper TypeScript types where `any` is used
- [ ] Implement route-based code splitting
- [ ] Add caching headers to API routes
- [ ] Optimize framer-motion imports (use specific animations only)

### Phase 3: Code Quality
- [ ] Extract duplicate code into utilities
- [ ] Implement the TODO payment email
- [ ] Consolidate similar modal patterns
- [ ] Remove unused imports

### Phase 4: Bundle Optimization
- [ ] Analyze bundle with next/bundle-analyzer
- [ ] Consider alternatives to heavy dependencies
- [ ] Implement tree-shaking optimizations
